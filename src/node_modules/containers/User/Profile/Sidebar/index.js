import { connect } from 'react-redux'
import Sidebar from 'components/User/Profile/Sidebar'
import { getUsers } from 'redux/user/selectors'
import { getCurrUser } from 'redux/profile/selectors'

const mapStateToProps = state => ({
  currUsername: getCurrUser(state),
  users: getUsers(state),
})

const mergeProps = (stateProps, dispatchProps, ownProps) => {
  const { currUsername, users } = stateProps
  const user = users.find(({ login }) => login === currUsername)
  return {
    ...dispatchProps,
    ...ownProps,
    user,
  }
}

export default connect(mapStateToProps, null, mergeProps)(Sidebar)
