import { connect } from 'react-redux'
import Header from 'components/User/Profile/Header'
import { setActiveProfileTab } from 'redux/profile/actions'
import { getActiveTab, getRepos, getFollowers, getFollowing, getStars } from 'redux/profile/selectors'
import { goBack } from 'redux/user/actions'

const mapDispatchToProps = {
  goBack,
  setActiveProfileTab,
}

const mapStateToProps = state => ({
  activeTab: getActiveTab(state),
  repos: getRepos(state),
  followers: getFollowers(state),
  following: getFollowing(state),
  stars: getStars(state),
})

const mergeProps = (stateProps, dispatchProps, ownProps) => {
  const { activeTab, repos, followers, following, stars } = stateProps
  const counts = {
    repos: repos.length,
    followers: followers.length,
    following: following.length,
    stars: stars.length
  }
  return {
    ...dispatchProps,
    ...ownProps,
    activeTab,
    counts,
  }
}

export default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Header)
